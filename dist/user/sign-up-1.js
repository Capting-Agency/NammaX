var l=(t,o,n)=>new Promise((a,_)=>{var c=e=>{try{i(n.next(e))}catch(r){_(r)}},s=e=>{try{i(n.throw(e))}catch(r){_(r)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(c,s);i((n=n.apply(t,o)).next())});function m(t,o="GET",n=!1,a=!1,_=!1,c=!0){try{let s={"Content-Type":"application/json"};_&&(s={}),a&&(s.Authorization=`Bearer ${a}`);let i={method:o,headers:s};return n&&(c?i.body=JSON.stringify(n):i.body=n),fetch(t,i).then(e=>e.ok?e.json():e.json().then(r=>(Promise.reject(r.message),{isFetchOk:!1,status:e.status,message:r.message,payload:r&&r.payload?r.payload:null}))).then(e=>e).catch(e=>(console.error("Error in fetch",e),e))}catch(s){return console.error("Error!: "+s),s}}function p(t=null,o="nammax_auth",n=60*60*24){t&&(document.cookie=`${o}=${t}; path=/; max-age=${n}`)}function x(t="/",o=2e3){setTimeout(()=>{window.location.href=t},o)}var d=Webflow||[];var O="https://www.nammacrossfit.com",u=O;var A="/sign-up-2",N=`${u}/sign-up-2`;var M=`${u}/user/dashboard`;var f="https://xoxo-jnzf-s0on.m2.xano.io/api:U0aE1wpF/oauth/google/init";var E="https://xoxo-jnzf-s0on.m2.xano.io/api:GEC76oIp/auth/signup";var g=[],h=[];function S(t){window.location.href=t.authUrl}function I(){var t=new URL(f);t.searchParams.set("redirect_uri",`${N}/`),t=t.toString();try{fetch(t,{headers:g,method:"GET"}).then(o=>o.ok?o.json():Promise.reject(o)).then(o=>h=o).then(()=>S(h)).catch(o=>{console.error("Error:",o)})}catch(o){console.error("Error!: "+o)}}var R=document.querySelector("#google-auth-btn");R&&R.addEventListener("click",()=>{I()});$("#password, #confirm-password").on("keyup",function(){($("#password").val().length>0||$("#confirm-password").val().length>0)&&($("#password").val()==$("#confirm-password").val()?$("#password-confirm-block").html("Passwords Match").css("color","green"):$("#password-confirm-block").html("Passwords don't match").css("color","red"))});var U=d||[];U.push(function(){$(document).off("submit"),$("form").submit(function(t){return l(this,null,function*(){t.preventDefault();let o=document.getElementById("xano-auth"),n;o&&(o.disabled=!0,n=o.value,o.value="Confirming...");let a=$(this);if(!($("#password").val()==$("#confirm-password").val())){a.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("Passwords don't match"),o&&(o.disabled=!1,o.value=n);return}if($("#password").val().length<5){a.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("Password length must be atleast 5 characters"),o&&(o.disabled=!1,o.value=n);return}let c={email:document.getElementById("email").value,password:document.getElementById("password").value.trim(),name:(document.getElementById("first_name").value+" "+document.getElementById("last_name").value).trim()},s=yield m(E,"POST",c);if(s.isFetchOk!==void 0&&!s.isFetchOk){console.error(s.message),a.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("Oops, there was an error signing you up. Please refresh the page and try again."),o&&(o.disabled=!1,o.value=n);return}Object.keys(s).includes("authToken")===!1?(a.siblings(".w-form-done").hide().siblings(".w-form-fail").show(),o&&(o.disabled=!1,o.value=n)):(p(s.authToken),a.hide().siblings(".w-form-done").show().siblings(".w-form-fail").hide(),x(A))})})});
