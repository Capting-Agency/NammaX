var c=(e,t,a)=>new Promise((o,l)=>{var _=n=>{try{r(a.next(n))}catch(i){l(i)}},s=n=>{try{r(a.throw(n))}catch(i){l(i)}},r=n=>n.done?o(n.value):Promise.resolve(n.value).then(_,s);r((a=a.apply(e,t)).next())});function m(e,t="GET",a=!1,o=!1,l=!1,_=!0){try{let s={"Content-Type":"application/json"};l&&(s={}),o&&(s.Authorization=`Bearer ${o}`);let r={method:t,headers:s};return a&&(_?r.body=JSON.stringify(a):r.body=a),fetch(e,r).then(n=>n.ok?n.json():n.json().then(i=>(Promise.reject(i.message),{isFetchOk:!1,status:n.status,message:i.message,payload:i&&i.payload?i.payload:null}))).then(n=>n).catch(n=>(console.error("Error in fetch",n),n))}catch(s){return console.error("Error!: "+s),s}}function p(e=null,t="nammax_auth",a=60*60*24){e&&(document.cookie=`${t}=${e}; path=/; max-age=${a}`)}function A(e="/",t=0){setTimeout(()=>{window.location.href=e},t)}var u="/user/dashboard",d="https://nammax.webflow.io/user/dashboard";var N="https://x8ki-letl-twmt.n7.xano.io/api:ocRzyo-e/oauth/google/init";var x="https://x8ki-letl-twmt.n7.xano.io/api:GEC76oIp/auth/login";var O=[],E=[];function f(e){window.location.href=e.authUrl}function S(){var e=new URL(N);e.searchParams.set("REDIRECT_URL",d),e=e.toString();try{fetch(e,{headers:O,method:"GET"}).then(t=>t.ok?t.json():Promise.reject(t)).then(t=>E=t).then(()=>f(E)).catch(t=>{console.error("Error:",t)})}catch(t){console.error("Error!: "+t)}}var h=document.querySelector("#google-auth-btn");h&&h.addEventListener("click",()=>{S()});var R=R||[];R.push(function(){$(document).off("submit"),$("form").submit(function(e){return c(this,null,function*(){e.preventDefault();let t=$(this),a={email:document.getElementById("email").value,password:document.getElementById("password").value},o=yield m(x,"POST",a);if(!o)return;if(o.isFetchOk!==void 0&&!o.isFetchOk){t.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text(o&&o.message?o.message:"There was an error signing you in. Please try again."),console.error(o.message);return}Object.keys(o).includes("authToken")===!1?t.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("There was an error signing you in. Please try again."):(p(o.authToken,"nammax_auth",60*60*24*30),A(u),t.hide().siblings(".w-form-done").show().siblings(".w-form-fail").hide())})})});
//# sourceMappingURL=sign-in.js.map
