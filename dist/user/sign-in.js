var l=(e,o,n)=>new Promise((_,s)=>{var c=t=>{try{i(n.next(t))}catch(a){s(a)}},r=t=>{try{i(n.throw(t))}catch(a){s(a)}},i=t=>t.done?_(t.value):Promise.resolve(t.value).then(c,r);i((n=n.apply(e,o)).next())});function m(e,o="GET",n=!1,_=!1,s=!1,c=!0){try{let r={"Content-Type":"application/json"};s&&(r={}),_&&(r.Authorization=`Bearer ${_}`);let i={method:o,headers:r};return n&&(c?i.body=JSON.stringify(n):i.body=n),fetch(e,i).then(t=>t.ok?t.json():t.json().then(a=>(Promise.reject(a.message),{isFetchOk:!1,status:t.status,message:a.message,payload:a&&a.payload?a.payload:null}))).then(t=>t).catch(t=>(console.error("Error in fetch",t),t))}catch(r){return console.error("Error!: "+r),r}}function p(e=null,o="nammax_auth",n=60*60*24){e&&(document.cookie=`${o}=${e}; path=/; max-age=${n}`)}function x(e="/",o=2e3){setTimeout(()=>{window.location.href=e},o)}var u=Webflow||[];var A="/user/dashboard",d="https://nammacrossfit.com/user/dashboard";var N="https://xoxo-jnzf-s0on.m2.xano.io/api:ocRzyo-e/oauth/google/init";var f="https://xoxo-jnzf-s0on.m2.xano.io/api:GEC76oIp/auth/login";var R=[],E=[];function O(e){window.location.href=e.authUrl}function g(){var e=new URL(N);e.searchParams.set("redirect_uri",d),e=e.toString();try{fetch(e,{headers:R,method:"GET"}).then(o=>o.ok?o.json():Promise.reject(o)).then(o=>E=o).then(()=>O(E)).catch(o=>{console.error("Error:",o)})}catch(o){console.error("Error!: "+o)}}var h=document.querySelector("#google-auth-btn");h&&h.addEventListener("click",()=>{g()});var S=u||[];S.push(function(){$(document).off("submit"),$("form").submit(function(e){return l(this,null,function*(){e.preventDefault();let o=document.getElementById("submit");o&&(o.disabled=!0);let n=$(this),_={email:document.getElementById("email").value,password:document.getElementById("password").value},s=yield m(f,"POST",_);if(!s)return;if(s.isFetchOk!==void 0&&!s.isFetchOk){n.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text(s&&s.message?s.message:"There was an error signing you in. Please try again."),console.error(s.message),o&&(o.disabled=!1);return}Object.keys(s).includes("authToken")===!1?(n.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("There was an error signing you in. Please try again."),o&&(o.disabled=!1)):(p(s.authToken,"nammax_auth",60*60*24*30),x(A),n.hide().siblings(".w-form-done").show().siblings(".w-form-fail").hide())})})});
