var l=(e,t,o)=>new Promise((s,_)=>{var c=n=>{try{a(o.next(n))}catch(i){_(i)}},r=n=>{try{a(o.throw(n))}catch(i){_(i)}},a=n=>n.done?s(n.value):Promise.resolve(n.value).then(c,r);a((o=o.apply(e,t)).next())});function m(e,t="GET",o=!1,s=!1,_=!1,c=!0){try{let r={"Content-Type":"application/json"};_&&(r={}),s&&(r.Authorization=`Bearer ${s}`);let a={method:t,headers:r};return o&&(c?a.body=JSON.stringify(o):a.body=o),fetch(e,a).then(n=>n.ok?n.json():n.json().then(i=>(Promise.reject(i.message),{isFetchOk:!1,status:n.status,message:i.message,payload:i&&i.payload?i.payload:null}))).then(n=>n).catch(n=>(console.error("Error in fetch",n),n))}catch(r){return console.error("Error!: "+r),r}}function p(e=null,t="nammax_auth",o=60*60*24){e&&(document.cookie=`${t}=${e}; path=/; max-age=${o}`)}function x(e="nammax_auth"){let o=`; ${document.cookie}`.split(`; ${e}=`);return o.length===2?o.pop().split(";").shift():null}function d(e="/",t=2e3){setTimeout(()=>{window.location.href=e},t)}var A=Webflow||[];var h="https://www.nammacrossfit.com",u=h;var L=`${u}/sign-up-2`,N="/user/dashboard",C=`${u}/user/dashboard`;var f="https://xoxo-jnzf-s0on.m2.xano.io/api:jniIGW5W/update_password",E="https://xoxo-jnzf-s0on.m2.xano.io/api:jniIGW5W/auth/magic-login";function R(e){return l(this,null,function*(){let o=yield m(E,"POST",{magic_token:e});o&&p(o)})}window.onload=function(){var e=new URL(document.location.href),t=e.searchParams.get("token");t?R(t):$("#update-password-btn").prop("disabled",!0).css("backgroundColor","#ff634e").val("Reset token not found")};$("#password, #confirm-password").on("keyup",function(){($("#password").val().length>0||$("#confirm-password").val().length>0)&&($("#password").val()==$("#confirm-password").val()?$("#password-confirm-block").html("Passwords Match").css("color","green"):$("#password-confirm-block").html("Passwords don't match").css("color","red"))});var O=A||[];O.push(function(){$(document).off("submit"),$("form").submit(function(e){return l(this,null,function*(){e.preventDefault();let t=$(this),o=x(),s=document.querySelector("#update-password-btn"),_;if(s&&(s.disabled=!0,_=s.value,s.value="Updating password"),!($("#password").val()==$("#confirm-password").val())){t.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("Passwords don't match"),s&&(s.disabled=!1,s.value=_);return}if($("#password").val().length<5){t.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("Password length must be atleast 5 characters"),s&&(s.disabled=!1,s.value=_);return}let r={password:document.getElementById("password").value,confirm_password:document.getElementById("confirm-password").value},a=yield m(f,"POST",r,o);if(a.isFetchOk!==void 0&&!a.isFetchOk){t.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("There was an error resetting your password, please refresh the page and try again"),console.error(a.message);return}else t.hide().siblings(".w-form-done").show().siblings(".w-form-fail").hide(),d(N,2e3)})})});
