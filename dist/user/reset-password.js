var l=(n,t,o)=>new Promise((s,_)=>{var c=e=>{try{a(o.next(e))}catch(i){_(i)}},r=e=>{try{a(o.throw(e))}catch(i){_(i)}},a=e=>e.done?s(e.value):Promise.resolve(e.value).then(c,r);a((o=o.apply(n,t)).next())});function p(n,t="GET",o=!1,s=!1,_=!1,c=!0){try{let r={"Content-Type":"application/json"};_&&(r={}),s&&(r.Authorization=`Bearer ${s}`);let a={method:t,headers:r};return o&&(c?a.body=JSON.stringify(o):a.body=o),fetch(n,a).then(e=>e.ok?e.json():e.json().then(i=>(Promise.reject(i.message),{isFetchOk:!1,status:e.status,message:i.message,payload:i&&i.payload?i.payload:null}))).then(e=>e).catch(e=>(console.error("Error in fetch",e),e))}catch(r){return console.error("Error!: "+r),r}}function m(n=null,t="nammax_auth",o=60*60*24){n&&(document.cookie=`${t}=${n}; path=/; max-age=${o}`)}function x(n="nammax_auth"){let o=`; ${document.cookie}`.split(`; ${n}=`);return o.length===2?o.pop().split(";").shift():null}function d(n="/",t=2e3){setTimeout(()=>{window.location.href=n},t)}var A=Webflow||[];var h="https://www.nammacrossfit.com",u=h;var L=`${u}/sign-up-2`,N="/user/dashboard",C=`${u}/user/dashboard`;var f="https://xoxo-jnzf-s0on.m2.xano.io/api:jniIGW5W/update_password",E="https://xoxo-jnzf-s0on.m2.xano.io/api:jniIGW5W/auth/magic-login";function R(n){return l(this,null,function*(){let o=yield p(E,"POST",{magic_token:n});o&&m(o)})}window.onload=function(){var n=new URL(document.location.href),t=n.searchParams.get("token");t?R(t):$("#update-password-btn").prop("disabled",!0).css("backgroundColor","#ff634e").val("Reset token not found")};$("#password, #confirm-password").on("keyup",function(){($("#password").val().length>0||$("#confirm-password").val().length>0)&&($("#password").val()==$("#confirm-password").val()?$("#password-confirm-block").html("Passwords Match").css("color","green"):$("#password-confirm-block").html("Passwords don't match").css("color","red"))});var O=A||[];O.push(function(){$(document).off("submit"),$("form").submit(function(n){return l(this,null,function*(){n.preventDefault();let t=$(this),o=x(),s=document.querySelector("#update-password-btn"),_;if(s&&(s.disabled=!0,_=s.value,s.value="Updating password"),!($("#password").val()==$("#confirm-password").val())){t.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("Passwords don't match"),s&&(s.disabled=!1,s.value=_);return}if($("#password").val().length<5){t.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("Password length must be atleast 5 characters"),s&&(s.disabled=!1,s.value=_);return}let r={password:document.getElementById("password").value,confirm_password:document.getElementById("confirm-password").value},a=yield p(f,"POST",r,o);if(a.isFetchOk!==void 0&&!a.isFetchOk){t.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("There was an error resetting your password, please refresh the page and try again"),console.error(a.message);return}else t.hide().siblings(".w-form-done").show().siblings(".w-form-fail").hide(),d(N,2e3)})})});
