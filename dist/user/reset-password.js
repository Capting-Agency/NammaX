var l=(e,n,t)=>new Promise((_,a)=>{var c=o=>{try{r(t.next(o))}catch(s){a(s)}},i=o=>{try{r(t.throw(o))}catch(s){a(s)}},r=o=>o.done?_(o.value):Promise.resolve(o.value).then(c,i);r((t=t.apply(e,n)).next())});function m(e,n="GET",t=!1,_=!1,a=!1,c=!0){try{let i={"Content-Type":"application/json"};a&&(i={}),_&&(i.Authorization=`Bearer ${_}`);let r={method:n,headers:i};return t&&(c?r.body=JSON.stringify(t):r.body=t),fetch(e,r).then(o=>o.ok?o.json():o.json().then(s=>(Promise.reject(s.message),{isFetchOk:!1,status:o.status,message:s.message,payload:s&&s.payload?s.payload:null}))).then(o=>o).catch(o=>(console.error("Error in fetch",o),o))}catch(i){return console.error("Error!: "+i),i}}function p(e=null,n="nammax_auth",t=60*60*24){e&&(document.cookie=`${n}=${e}; path=/; max-age=${t}`)}function x(e="nammax_auth"){let t=`; ${document.cookie}`.split(`; ${e}=`);return t.length===2?t.pop().split(";").shift():null}function A(e="/",n=2e3){setTimeout(()=>{window.location.href=e},n)}var u=Webflow||[];var d="/user/dashboard";var N="https://x8ki-letl-twmt.n7.xano.io/api:jniIGW5W/update_password",E="https://x8ki-letl-twmt.n7.xano.io/api:jniIGW5W/auth/magic-login";function f(e){return l(this,null,function*(){let t=yield m(E,"POST",{magic_token:e});t&&p(t)})}window.onload=function(){var e=new URL(document.location.href),n=e.searchParams.get("token");n&&f(n)};var h=u||[];h.push(function(){$(document).off("submit"),$("form").submit(function(e){return l(this,null,function*(){e.preventDefault();let n=$(this),t=x(),_={password:document.getElementById("password").value,confirm_password:document.getElementById("confirm-password").value},a=yield m(N,"POST",_,t);if(a.isFetchOk!==void 0&&!a.isFetchOk){n.siblings(".w-form-done").hide().siblings(".w-form-fail").show(),console.error(a.message);return}else n.hide().siblings(".w-form-done").show().siblings(".w-form-fail").hide();A(d)})})});
