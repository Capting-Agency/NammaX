var m=(n,e,o)=>new Promise((_,a)=>{var c=t=>{try{i(o.next(t))}catch(s){a(s)}},r=t=>{try{i(o.throw(t))}catch(s){a(s)}},i=t=>t.done?_(t.value):Promise.resolve(t.value).then(c,r);i((o=o.apply(n,e)).next())});function l(n,e="GET",o=!1,_=!1,a=!1,c=!0){try{let r={"Content-Type":"application/json"};a&&(r={}),_&&(r.Authorization=`Bearer ${_}`);let i={method:e,headers:r};return o&&(c?i.body=JSON.stringify(o):i.body=o),fetch(n,i).then(t=>t.ok?t.json():t.json().then(s=>(Promise.reject(s.message),{isFetchOk:!1,status:t.status,message:s.message,payload:s&&s.payload?s.payload:null}))).then(t=>t).catch(t=>(console.error("Error in fetch",t),t))}catch(r){return console.error("Error!: "+r),r}}function p(n=null,e="nammax_auth",o=60*60*24){n&&(document.cookie=`${e}=${n}; path=/; max-age=${o}`)}function x(n="nammax_auth"){let o=`; ${document.cookie}`.split(`; ${n}=`);return o.length===2?o.pop().split(";").shift():null}function A(n="/",e=2e3){setTimeout(()=>{window.location.href=n},e)}var u=Webflow||[];var d="/user/dashboard";var N="https://xoxo-jnzf-s0on.m2.xano.io/api:jniIGW5W/update_password",f="https://xoxo-jnzf-s0on.m2.xano.io/api:jniIGW5W/auth/magic-login";function E(n){return m(this,null,function*(){let o=yield l(f,"POST",{magic_token:n});o&&p(o)})}window.onload=function(){var n=new URL(document.location.href),e=n.searchParams.get("token");e&&E(e)};var h=u||[];h.push(function(){$(document).off("submit"),$("form").submit(function(n){return m(this,null,function*(){n.preventDefault();let e=$(this),o=x(),_={password:document.getElementById("password").value,confirm_password:document.getElementById("confirm-password").value},a=yield l(N,"POST",_,o);if(a.isFetchOk!==void 0&&!a.isFetchOk){e.siblings(".w-form-done").hide().siblings(".w-form-fail").show(),console.error(a.message);return}else e.hide().siblings(".w-form-done").show().siblings(".w-form-fail").hide();A(d)})})});
