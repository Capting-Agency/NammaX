var l=(e,n,o)=>new Promise((_,a)=>{var c=t=>{try{r(o.next(t))}catch(s){a(s)}},i=t=>{try{r(o.throw(t))}catch(s){a(s)}},r=t=>t.done?_(t.value):Promise.resolve(t.value).then(c,i);r((o=o.apply(e,n)).next())});function m(e,n="GET",o=!1,_=!1,a=!1,c=!0){try{let i={"Content-Type":"application/json"};a&&(i={}),_&&(i.Authorization=`Bearer ${_}`);let r={method:n,headers:i};return o&&(c?r.body=JSON.stringify(o):r.body=o),fetch(e,r).then(t=>t.ok?t.json():t.json().then(s=>(Promise.reject(s.message),{isFetchOk:!1,status:t.status,message:s.message,payload:s&&s.payload?s.payload:null}))).then(t=>t).catch(t=>(console.error("Error in fetch",t),t))}catch(i){return console.error("Error!: "+i),i}}function p(e=null,n="nammax_auth",o=60*60*24){e&&(document.cookie=`${n}=${e}; path=/; max-age=${o}`)}function x(e="nammax_auth"){let o=`; ${document.cookie}`.split(`; ${e}=`);return o.length===2?o.pop().split(";").shift():null}function A(e="/",n=2e3){setTimeout(()=>{window.location.href=e},n)}var u=Webflow||[];var d="/user/dashboard";var N="https://x8ki-letl-twmt.n7.xano.io/api:jniIGW5W/update_password",E="https://x8ki-letl-twmt.n7.xano.io/api:jniIGW5W/auth/magic-login";function f(e){return l(this,null,function*(){let o=yield m(E,"POST",{magic_token:e});o&&p(o)})}window.onload=function(){var e=new URL(document.location.href),n=e.searchParams.get("token");n&&f(n)};var h=u||[];h.push(function(){$(document).off("submit"),$("form").submit(function(e){return l(this,null,function*(){e.preventDefault();let n=$(this),o=x(),_={password:document.getElementById("password").value,confirm_password:document.getElementById("confirm-password").value},a=yield m(N,"POST",_,o);if(a.isFetchOk!==void 0&&!a.isFetchOk){n.siblings(".w-form-done").hide().siblings(".w-form-fail").show(),console.error(a.message);return}else n.hide().siblings(".w-form-done").show().siblings(".w-form-fail").hide();A(d)})})});
