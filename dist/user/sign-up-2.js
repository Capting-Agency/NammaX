var p=(n,t,e)=>new Promise((s,i)=>{var c=r=>{try{a(e.next(r))}catch(_){i(_)}},o=r=>{try{a(e.throw(r))}catch(_){i(_)}},a=r=>r.done?s(r.value):Promise.resolve(r.value).then(c,o);a((e=e.apply(n,t)).next())});var A=["Male","Female","Other","Prefer not to say"];function d(n,t="GET",e=!1,s=!1,i=!1,c=!0){try{let o={"Content-Type":"application/json"};i&&(o={}),s&&(o.Authorization=`Bearer ${s}`);let a={method:t,headers:o};return e&&(c?a.body=JSON.stringify(e):a.body=e),fetch(n,a).then(r=>r.ok?r.json():r.json().then(_=>(Promise.reject(_.message),{isFetchOk:!1,status:r.status,message:_.message,payload:_&&_.payload?_.payload:null}))).then(r=>r).catch(r=>(console.error("Error in fetch",r),r))}catch(o){return console.error("Error!: "+o),o}}function N(n=null,t="nammax_auth",e=60*60*24){n&&(document.cookie=`${t}=${n}; path=/; max-age=${e}`)}function x(n="nammax_auth"){let e=`; ${document.cookie}`.split(`; ${n}=`);return e.length===2?e.pop().split(";").shift():null}function l(n="/",t=2e3){setTimeout(()=>{window.location.href=n},t)}var E=Webflow||[];var m="/sign-in";var f="https://www.nammacrossfit.com/sign-up-2",h="/user/dashboard";var R="https://xoxo-jnzf-s0on.m2.xano.io/api:U0aE1wpF/oauth/google/continue";var u="https://xoxo-jnzf-s0on.m2.xano.io/api:Kml2N_BA/user/preferences";var O=[],g=[];function S(n){var t=new URL(R);t.searchParams.set("redirect_uri",`${f}/`),t.searchParams.set("code",n),t=t.toString();var e=new URL(document.location.href);e.searchParams.delete("code"),e.searchParams.delete("scope"),e.searchParams.delete("authuser"),e.searchParams.delete("hd"),e.searchParams.delete("prompt"),history.replaceState(null,"",e.toString()),fetch(t,{headers:O,method:"GET"}).then(s=>s.json()).then(s=>g=s).then(()=>N(g.token)).catch(s=>{console.error("Error:",s)})}window.onload=function(){var n=new URL(document.location.href),t=n.searchParams.get("reason"),e=n.searchParams.get("code");if(t){let i=document.getElementById("warning_block");i.style.display="block",i.innerText="Please fill these required details in order to use the app"}e&&S(e);let s=x();s?I(s):l(`${m}?reason=NOT_SIGNED_IN`)};function I(n){return p(this,null,function*(){let t=yield d(u,"GET",!1,n);if(t.isFetchOk!==void 0&&!t.isFetchOk){console.error(t.message),l(`${m}?reason=NOT_SIGNED_IN`,1e3);return}let{user:e,gyms:s}=t;e.weight&&(document.getElementById("weight").value=e.weight),e.height&&(document.getElementById("height").value=e.height),e.date_of_birth&&(document.getElementById("date_of_birth").value=e.date_of_birth);let i=document.getElementById("gym_select");s.forEach(o=>{var a=document.createElement("option");a.value=o.id,a.text=o.location,o.id===e.gym_id&&(a.selected=!0),i.appendChild(a)});let c=document.getElementById("gender_select");A.forEach(o=>{var a=document.createElement("option");a.value=o,a.text=o,o===t.gender&&(a.selected=!0),c.appendChild(a)})})}var D=E||[];D.push(function(){$(document).off("submit"),$("form").submit(function(n){return p(this,null,function*(){n.preventDefault();let t=document.getElementById("next-btn"),e;t&&(t.disabled=!0,e=t.value,t.value="Confirming...");let s=$(this),i=x();if(i){let c={date_of_birth:document.getElementById("date_of_birth").value,gender:document.getElementById("gender_select").value,height:document.getElementById("height").value,weight:document.getElementById("weight").value,gym_id:parseInt(document.getElementById("gym_select").value)},o=yield d(u,"POST",c,i);if(o.isFetchOk!==void 0&&!o.isFetchOk){console.error(o.message),s.siblings(".w-form-done").hide().siblings(".w-form-fail").show(),t&&(t.disabled=!1,t.value=e);return}else s.hide().siblings(".w-form-done").show().siblings(".w-form-fail").hide(),l(h)}else l(`${m}?reason=NOT_SIGNED_IN`)})})});
