var m=(s,t,e)=>new Promise((o,i)=>{var c=r=>{try{a(e.next(r))}catch(_){i(_)}},n=r=>{try{a(e.throw(r))}catch(_){i(_)}},a=r=>r.done?o(r.value):Promise.resolve(r.value).then(c,n);a((e=e.apply(s,t)).next())});var A=["Male","Female","Other","Prefer not to say"];function p(s,t="GET",e=!1,o=!1,i=!1,c=!0){try{let n={"Content-Type":"application/json"};i&&(n={}),o&&(n.Authorization=`Bearer ${o}`);let a={method:t,headers:n};return e&&(c?a.body=JSON.stringify(e):a.body=e),fetch(s,a).then(r=>r.ok?r.json():r.json().then(_=>(Promise.reject(_.message),{isFetchOk:!1,status:r.status,message:_.message,payload:_&&_.payload?_.payload:null}))).then(r=>r).catch(r=>(console.error("Error in fetch",r),r))}catch(n){return console.error("Error!: "+n),n}}function N(s=null,t="nammax_auth",e=60*60*24){s&&(document.cookie=`${t}=${s}; path=/; max-age=${e}`)}function d(s="nammax_auth"){let e=`; ${document.cookie}`.split(`; ${s}=`);return e.length===2?e.pop().split(";").shift():null}function l(s="/",t=2e3){setTimeout(()=>{window.location.href=s},t)}var f=Webflow||[];var x="/sign-in";var E="/user/dashboard";var u="https://xoxo-jnzf-s0on.m2.xano.io/api:Kml2N_BA/user/preferences";var g=[],h=[];function R(s){var t=new URL("https://xoxo-jnzf-s0on.m2.xano.io/api:ocRzyo-e/oauth/google/continue");t.searchParams.set("redirect_uri","https://nammacrossfit.com/sign-up-2"),t.searchParams.set("code",s),t=t.toString();var e=new URL(document.location.href);e.searchParams.delete("code"),e.searchParams.delete("scope"),e.searchParams.delete("authuser"),e.searchParams.delete("hd"),e.searchParams.delete("prompt"),history.replaceState(null,"",e.toString()),fetch(t,{headers:g,method:"GET"}).then(o=>o.json()).then(o=>h=o).then(()=>N(h.token)).catch(o=>{console.error("Error:",o)})}window.onload=function(){var s=new URL(document.location.href),t=s.searchParams.get("reason"),e=s.searchParams.get("code");if(t){let o=document.getElementById("warning_block");o.style.display="block",o.innerText="Please fill these required details in order to use the app"}if(e)R(e);else{let o=d();o?O(o):l(`${x}?reason=NOT_SIGNED_IN`)}};function O(s){return m(this,null,function*(){let t=yield p(u,"GET",!1,s);if(t.isFetchOk!==void 0&&!t.isFetchOk){console.error(t.message);return}let{user:e,gyms:o}=t;e.weight&&(document.getElementById("weight").value=e.weight),e.height&&(document.getElementById("height").value=e.height),e.date_of_birth&&(document.getElementById("date_of_birth").value=e.date_of_birth);let i=document.getElementById("gym_select");o.forEach(n=>{var a=document.createElement("option");a.value=n.id,a.text=n.location,n.id===e.gym_id&&(a.selected=!0),i.appendChild(a)});let c=document.getElementById("gender_select");A.forEach(n=>{var a=document.createElement("option");a.value=n,a.text=n,n===t.gender&&(a.selected=!0),c.appendChild(a)})})}var I=f||[];I.push(function(){$(document).off("submit"),$("form").submit(function(s){return m(this,null,function*(){s.preventDefault();let t=document.getElementById("next-btn"),e;t&&(t.disabled=!0,e=t.value,t.value="Confirming...");let o=$(this),i=d();if(i){let c={date_of_birth:document.getElementById("date_of_birth").value,gender:document.getElementById("gender_select").value,height:document.getElementById("height").value,weight:document.getElementById("weight").value,gym_id:parseInt(document.getElementById("gym_select").value)},n=yield p(u,"POST",c,i);if(n.isFetchOk!==void 0&&!n.isFetchOk){console.error(n.message),o.siblings(".w-form-done").hide().siblings(".w-form-fail").show(),t&&(t.disabled=!1,t.value=e);return}else o.hide().siblings(".w-form-done").show().siblings(".w-form-fail").hide(),l(E)}else l(`${x}?reason=NOT_SIGNED_IN`)})})});
