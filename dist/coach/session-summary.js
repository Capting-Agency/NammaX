var f=(t,n,e)=>new Promise((a,o)=>{var s=c=>{try{i(e.next(c))}catch(l){o(l)}},r=c=>{try{i(e.throw(c))}catch(l){o(l)}},i=c=>c.done?a(c.value):Promise.resolve(c.value).then(s,r);i((e=e.apply(t,n)).next())});function _(t,n="GET",e=!1,a=!1,o=!1,s=!0){try{let r={"Content-Type":"application/json"};o&&(r={}),a&&(r.Authorization=`Bearer ${a}`);let i={method:n,headers:r};return e&&(s?i.body=JSON.stringify(e):i.body=e),fetch(t,i).then(c=>c.ok?c.json():c.json().then(l=>(Promise.reject(l.message),{isFetchOk:!1,status:c.status,message:l.message,payload:l&&l.payload?l.payload:null}))).then(c=>c).catch(c=>(console.error("Error in fetch",c),c))}catch(r){return console.error("Error!: "+r),r}}function p(t="nammax_auth"){let e=`; ${document.cookie}`.split(`; ${t}=`);return e.length===2?e.pop().split(";").shift():null}function m(t="/",n=2e3){setTimeout(()=>{window.location.href=t},n)}function A(t=1e3){setTimeout(()=>{window.location.reload()},t)}function S(t=null,n=!1,e=!1,a=!1){if(t==null)return"NaN";let o=new Date,s=new Date(t),r=s.getHours(),i="";if(a||(i=r>=12?"PM":"AM",r=r%12||12),n){let c=s.getMinutes();return c=c<10?`0${c}`:c,e?`${o.getDate()===s.getDate()?"Today":o.getDate()+1===s.getDate()?"Tomorrow":o.getDate()+2===s.getDate()?"Day After Tomorrow":g(t)} ${r}:${c} ${i}`:`${r}:${c} ${i}`}else return e?`${o.getDate()===s.getDate()?"Today":o.getDate()+1===s.getDate()?"Tomorrow":o.getDate()+2===s.getDate()?"Day After Tomorrow":g(t)} ${r} ${i}`:`${g(t)} ${r} ${i}`}function g(t=null){if(t==null)return"NaN";let n=new Date(t);return`${n.getDate()}/${n.getMonth()+1}/${n.getFullYear()}`}function O(t=null){if(t==null)return"NaN";t=t*60;let n=`${t/60^0}`.slice(-2),e=("0"+t%60).slice(-2);return n!="0"?e!="00"?`${n} HR ${e} M`:n+" HR":e+" Mins"}function R(t,n=null){if(t!=null){var e,a=t.options.length-1;for(e=a;e>=0;e--)e!==n&&t.remove(e)}}function D(){let t=document.getElementById("loading-screen");t?t.remove():console.log("did not find loading screen")}function N({single:t=!0,baseElement:n="",TriggerBtn:e="jsModalOpen",_modalWindow:a="jsModal"},o){if(t){var s=n.querySelector("#"+e);s.onclick=function(){var c=document.getElementById(a);o&&o(),c.classList?c.classList.add("open"):c.className+=" open"}}else for(var r=document.getElementsByClassName(e),i=0;i<r.length;i++)r[i].onclick=function(){var c=this.getAttribute("href").substr(1),l=document.getElementById(c);l.classList?l.classList.add("open"):l.className+=" open"}}function h({TriggerBtn:t="jsModalClose",_modalWindow:n="jsModal"},e){var a=document.getElementById(t),o=document.getElementById(n);a.onclick=function(){o.classList?o.classList.remove("open"):o.className=o.className.replace(new RegExp("(^|\\b)"+"open".split(" ").join("|")+"(\\b|$)","gi")," ")},e&&e()}var T=Webflow||[];var u="/coach/sign-in",I="/coach/dashboard";var U="https://xoxo-jnzf-s0on.m2.xano.io/api:Kml2N_BA/coach/all_coaches",y="https://xoxo-jnzf-s0on.m2.xano.io/api:Kml2N_BA/coach/session_summary/",C="https://xoxo-jnzf-s0on.m2.xano.io/api:Kml2N_BA/coach/session_summary/search/",L="https://xoxo-jnzf-s0on.m2.xano.io/api:Kml2N_BA/coach/session_summary/comments/",b="https://xoxo-jnzf-s0on.m2.xano.io/api:Kml2N_BA/coach/session_summary/update_coach/";var x,d=[];window.onload=function(){let t=p();t?(w(t),D()):m(`${u}?reason=NOT_SIGNED_IN`)};function w(t){return f(this,null,function*(){var s;var n=new URL(document.location.href);x=n.searchParams.get("session"),x||m(I);let e=yield _(y+x,"GET",!1,t);if(e.isFetchOk!==void 0&&!e.isFetchOk){console.error(e.message);return}if(e.status!=="COMPLETED"){console.error("Session hasnt been completed yet!"),m(I);return}let a=[],o=[];(s=e==null?void 0:e.users)==null||s.forEach(r=>{r.attended?a.push(r):o.push(r)}),j(e,a.length),X(a),v(o),H(e.users),P(e.secondary_coach,t),K(e.comments,t)})}function j(t,n){var s,r,i;let e=document.getElementById("header-container");e.querySelector("#session-name").innerText=t.session_name,e.querySelector("#start-time").innerText=(s=S(t.start_time,!0))!=null?s:"NaN",e.querySelector("#date").innerText=new Date(t.time).toLocaleDateString("en-us",{weekday:"short",month:"short",day:"numeric"}),e.querySelector("#gym-location").innerText=t.location,e.querySelector("#duration").innerText=O(t.duration);let a=new Date(t.end_time).getHours()-new Date(t.start_time).getHours(),o=(new Date(t.end_time).getMinutes()-new Date(t.start_time).getMinutes())/60;e.querySelector("#actual-duration").innerText=O(parseFloat(a)+parseFloat(o)),e.querySelector("#users-attended").innerText=n,e.querySelector("#users-missed").innerText=((r=t==null?void 0:t.users)==null?void 0:r.length)-n,e.querySelector("#end-time").innerText=(i=S(t.end_time,!0))!=null?i:"NaN"}function X(t){let n=document.getElementById("attended-container"),e=n.querySelector("#attended-item");if(t.length===0){let a=document.createElement("p");a.style.color="black",a.innerText="All users missed this session",n.append(a)}else t.forEach(a=>{let o=e.cloneNode(!0);o.setAttribute("id",""),o.style.display="flex",a.profile_picture&&(o.querySelector("#profile-pic").src=a.profile_picture.url),o.querySelector("#attended-name").innerText=a.name,n.append(o)});e.remove()}function v(t){let n=document.getElementById("missed-container"),e=n.querySelector("#missed-item");if(t.length===0){let a=document.createElement("p");a.style.color="black",a.innerText="No users missed this session",n.append(a)}else t.forEach(a=>{let o=e.cloneNode(!0);o.setAttribute("id",""),o.style.display="flex",a.profile_picture&&(o.querySelector("#profile-pic").src=a.profile_picture.url),o.querySelector("#missed-name").innerText=a.name,n.append(o)});e.remove()}function H(t){N({baseElement:document.getElementById("btn-container"),TriggerBtn:"edit-users-btn",_modalWindow:"edit-user-popout"},()=>{d=t,E(t)}),h({TriggerBtn:"close-edit-user-btn",_modalWindow:"edit-user-popout"})}function E(t){let n=document.getElementById("session-current-user-container"),e=n.querySelector("#session-current-user-item");n.querySelectorAll(".summary-user-details.selected").forEach((o,s)=>{s!==0&&o.remove()}),t.forEach(o=>{let s=e.cloneNode(!0);s.setAttribute("id",""),s.style.display="flex",o.attended||(s.style.backgroundColor="#ff634e",s.querySelector("#session-current-user-delete-btn").style.filter="grayscale(1)"),o.profile_picture&&(s.querySelector("#session-current-user-pfp").style.backgroundImage=`url(${o.profile_picture.url})`),s.querySelector("#session-current-user-name").innerText=o.name,s.querySelector("#session-current-user-delete-btn").onclick=()=>{d=d.filter(r=>r.user_id!==o.user_id),E(d)},n.append(s)}),e.style.display="none"}function z(t){let e=document.getElementById("edit-user-popout").querySelector("#search-item-container"),a=e.querySelector("#search-item");function o(s){if(e.querySelectorAll(".summary-user-details.search-item").forEach((i,c)=>{c!==0&&i.remove()}),s.length===0){let i=document.createElement("p");i.style.color="black",i.innerText="No users with this name found",i.classList.add("summary-user-details","search-item"),i.style.display="flex",e.append(i)}else s.forEach(i=>{let c=a.cloneNode(!0);c.setAttribute("id",""),c.style.display="flex",i.profile_picture&&(c.querySelector("#search-item-pfp").style.backgroundImage=`url(${i.profile_picture.url})`),c.querySelector("#search-item-name").innerText=i.name,c.onclick=()=>{let l;d.some((B,M)=>{if(B.user_id===i.user_id)return l=M,!0})?(d[l].attended=!0,E(d)):(i.attended=!0,d.push(i),E(d)),c.remove()},e.append(c)})}o(t),a.style.display="none"}function P(t,n){N({baseElement:document.getElementById("btn-container"),TriggerBtn:"add-coach-btn",_modalWindow:"add-coach-popout"},()=>{let e=document.getElementById("coach-form-block"),a=e.querySelector("#second-coach-select");if(t.team_id){let s=e.querySelector("#coach-already-added-text");s.innerText=`Coach ${t.name} already added`,s.classList.remove("hide")}function o(){return f(this,null,function*(){let s=yield _(U,"GET",!1,n);if(s.isFetchOk!==void 0&&!s.isFetchOk){console.error(s.message),m(`${u}?reason=NOT_SIGNED_IN`);return}R(a),s.forEach(r=>{var i=document.createElement("option");i.value=r.id,i.innerHTML=r.name,a.appendChild(i)}),a.removeEventListener("focus",o)})}a.addEventListener("focus",o)}),h({TriggerBtn:"close-add-coach-btn",_modalWindow:"add-coach-popout"})}function K(t){N({baseElement:document.getElementById("btn-container"),TriggerBtn:"add-notes-btn",_modalWindow:"add-notes-popout"},()=>{k(t)}),h({TriggerBtn:"close-add-notes-btn",_modalWindow:"add-notes-popout"})}function k(t){let n=document.getElementById("comments");t&&(n.value=t)}var F=T||[];F.push(function(){$(document).off("submit"),$("form").on("submit",function(t){return f(this,null,function*(){t.preventDefault();let n=$(this);if(n.attr("id")==="coach-form-block"){let e=document.getElementById("second-coach-submit-btn");e&&(e.disabled=!0);let a=p();if(a){let o=document.getElementById("second-coach-select"),s={name:o.options[o.selectedIndex].text,coach_id:parseInt(o.value)},r=yield _(b+x,"POST",s,a);if(r.isFetchOk!==void 0&&!r.isFetchOk){console.error(r.message),n.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("There was an error trying to add the second coach. Please refresh your browser and try again."),e&&(e.disabled=!1);return}n.hide().siblings(".w-form-done").show().siblings(".w-form-fail").hide(),A()}else m(`${u}?reason=NOT_SIGNED_IN`)}else if(n.attr("id")==="notes-form-block"){let e=document.getElementById("submit-comments-btn");e&&(e.disabled=!0);let a=p();if(a){let s={comment:document.getElementById("comments").value},r=yield _(L+x,"POST",s,a);if(r.isFetchOk!==void 0&&!r.isFetchOk){console.error(r.message),n.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("Failed to add comment. Please refresh your browser and try again."),e&&(e.disabled=!1);return}A()}else m(`${u}?reason=NOT_SIGNED_IN`)}else if(n.attr("id")==="search-form-block"){let e=p();if(e){let s=document.getElementById("edit-user-popout").querySelector("#search-input").value;if(s.length===0)return;let r={search_query:`${s}:*`},i=yield _(C+s,"POST",r,e);if(i.isFetchOk!==void 0&&!i.isFetchOk){console.error(i.message),n.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("Oops, that user may not exist! Just to be safe, please try again after refreshing your browser.");return}z(i)}else m(`${u}?reason=NOT_SIGNED_IN`)}else if(n.attr("id")==="update-session-form-block"){let e=document.getElementById("update-session-btn");e&&(e.disabled=!0);let a=p();if(a){let o={};o.items=[...d.map(r=>({user_id:r.user_id,attended:r.attended}))];let s=yield _(y+x,"POST",o,a);if(s.isFetchOk!==void 0&&!s.isFetchOk){console.error(s.message),n.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("There was an error trying to update the session. Please refresh your browser and try again."),e&&(e.disabled=!1);return}n.hide().siblings(".w-form-done").show().siblings(".w-form-fail").hide(),A()}else m(`${u}?reason=NOT_SIGNED_IN`)}})})});
