var f=(e,n,t)=>new Promise((c,m)=>{var r=o=>{try{a(t.next(o))}catch(l){m(l)}},s=o=>{try{a(t.throw(o))}catch(l){m(l)}},a=o=>o.done?c(o.value):Promise.resolve(o.value).then(r,s);a((t=t.apply(e,n)).next())});function R(e,n="GET",t=!1,c=!1,m=!1,r=!0){try{let s={"Content-Type":"application/json"};m&&(s={}),c&&(s.Authorization=`Bearer ${c}`);let a={method:n,headers:s};return t&&(r?a.body=JSON.stringify(t):a.body=t),fetch(e,a).then(o=>o.ok?o.json():o.json().then(l=>(Promise.reject(l.message),{isFetchOk:!1,status:o.status,message:l.message,payload:l&&l.payload?l.payload:null}))).then(o=>o).catch(o=>(console.error("Error in fetch",o),o))}catch(s){return console.error("Error!: "+s),s}}function X(e=null,n="nammax_auth",t=60*60*24){e&&(document.cookie=`${n}=${e}; path=/; max-age=${t}`)}function D(e="nammax_auth"){let t=`; ${document.cookie}`.split(`; ${e}=`);return t.length===2?t.pop().split(";").shift():null}function S(e="/",n=2e3){setTimeout(()=>{window.location.href=e},n)}function E(e=null,n=!1,t=!1,c=!1){if(e==null)return"NaN";let m=new Date,r=new Date(e),s=r.getHours(),a="";if(c||(a=s>=12?"PM":"AM",s=s%12||12),n){let o=r.getMinutes();return o=o<10?`0${o}`:o,t?`${m.getDate()===r.getDate()?"Today At":m.getDate()+1===r.getDate()?"Tomorrow At":m.getDate()+2===r.getDate()?"Day After Tomorrow At":y(e)} ${s}:${o} ${a}`:`${s}:${o} ${a}`}else return t?`${m.getDate()===r.getDate()?"Today At":m.getDate()+1===r.getDate()?"Tomorrow At":m.getDate()+2===r.getDate()?"Day After Tomorrow At":y(e)} ${s} ${a}`:`${y(e)} ${s} ${a}`}function y(e=null){if(e==null)return"NaN";let n=new Date(e);return`${n.getDate()}/${n.getMonth()+1}/${n.getFullYear()}`}function T(e=null){if(e==null)return"NaN";e=e*60;let n=`${e/60^0}`.slice(-2),t=("0"+e%60).slice(-2);return n!="0"?t!="00"?`${n} HR ${t} M`:n+" HR":t+" Mins"}function v(e,n=null){if(e!=null){var t,c=e.options.length-1;for(t=c;t>=0;t--)t!==n&&e.remove(t)}}function z(e="/sign-in"){window.localStorage.removeItem("auth"),S(`${e}`)}function O(e=!1,n=!0,t="current-time"){let c=document.getElementById(t);c&&n?(c.innerText=`${new Date().toLocaleDateString("en-us",{weekday:"short",month:"short",day:"numeric"})} | ${E(new Date().getTime(),!0,!1,e)}`,setTimeout(()=>O(e,n,t),2e4)):c&&!n&&(c.innerText=E(new Date().getTime(),!0,!1,e),setTimeout(()=>O(e,n,t),2e4))}function H(){let e=document.getElementById("loading-screen");e?e.remove():console.log("did not find loading screen")}function U({single:e=!0,baseElement:n="",TriggerBtn:t="jsModalOpen",_modalWindow:c="jsModal"},m){if(e){var r=n.querySelector("#"+t);r.onclick=function(){var o=document.getElementById(c);m&&m(),o.classList?o.classList.add("open"):o.className+=" open"}}else for(var s=document.getElementsByClassName(t),a=0;a<s.length;a++)s[a].onclick=function(){var o=this.getAttribute("href").substr(1),l=document.getElementById(o);l.classList?l.classList.add("open"):l.className+=" open"}}function L({TriggerBtn:e="jsModalClose",_modalWindow:n="jsModal"},t){var c=document.getElementById(e),m=document.getElementById(n);c.onclick=function(){m.classList?m.classList.remove("open"):m.className=m.className.replace(new RegExp("(^|\\b)"+"open".split(" ").join("|")+"(\\b|$)","gi")," ")},t&&t()}function K({_modalWindow:e="jsModal"},n){var t=document.getElementById(e);function c(){t.classList?t.classList.add("open"):t.className+=" open",n&&n()}c()}function C({_modalWindow:e},n){var t=document.getElementById(e);function c(){t.classList?t.classList.remove("open"):t.className=t.className.replace(new RegExp("(^|\\b)"+"open".split(" ").join("|")+"(\\b|$)","gi")," "),n&&n()}c()}var P=Webflow||[];var B="/coach/sign-in";var M="/coach/session-details/";var G="https://xoxo-jnzf-s0on.m2.xano.io/api:Kml2N_BA/coach/sessions/start_session/",W="https://xoxo-jnzf-s0on.m2.xano.io/api:Kml2N_BA/coach/dashboard/",F="https://xoxo-jnzf-s0on.m2.xano.io/api:Kml2N_BA/coach/all_gyms";(()=>{let e=[];window.onload=function(){let r=document.getElementById("navbar-logout-btn");r&&(r.onclick=()=>{z("/coach/sign-in")});let s=D();s?(O(!0),n(s),H()):S(`${B}?reason=NOT_SIGNED_IN`)};function n(r,s=!1){return f(this,null,function*(){let a=D("nammaxCoachSelectedGym");if(!a||s){K({_modalWindow:"gym-select-popout"});let o;if(e.length===0?o=yield R(F,"GET",!1,r):o=e,o.isFetchOk!==void 0&&!o.isFetchOk){console.error(o.message),S(`${B}?reason=NOT_SIGNED_IN`);return}e=o;let l=document.getElementById("gym-select-popout"),p=l.querySelector("#coach-gym-select"),A=l.querySelector("#confirm-gym-select-btn");if(s){let u=l.querySelector("#cancel-gym-select-btn");u.onclick=()=>{C({_modalWindow:"gym-select-popout"})},u.classList.remove("hide")}v(p),o.forEach((u,b)=>{var i=document.createElement("option");i.value=u.id,i.innerText=u.location,b===0&&(i.selected=!0),a==u.id&&(i.selected=!0),p.appendChild(i)}),A.onclick=()=>{let u=p.value;t(u,r),C({_modalWindow:"gym-select-popout"},()=>{X(u,"nammaxCoachSelectedGym")})}}else t(a,r)})}function t(r,s){return f(this,null,function*(){let a=yield R(W+r,"GET",!1,s);if(a.isFetchOk!==void 0&&!a.isFetchOk){console.error(a.message);return}let{coach:o,sessions:l}=a;o.profile_picture&&(document.getElementById("profile-avatar").style.backgroundImage=`url(${o.profile_picture.url})`),document.getElementById("user-name").innerText="Coach "+o.name,document.getElementById("location-map-name").innerText=o.location,l.forEach(p=>{if(p.status==="IN PROGRESS"&&p.coach.status==="IN SESSION"&&p.team_id===o.id){S(`${M}?session=${p.id}`);return}}),c(s),m(s,l)})}function c(r){U({_modalWindow:"gym-select-popout",TriggerBtn:"location-map-change-btn",baseElement:document.getElementById("location-map-container")},()=>{n(r,!0)}),L({_modalWindow:"gym-select-popout",TriggerBtn:"cancel-gym-select-btn"})}function m(r,s){return f(this,null,function*(){let a=document.getElementById("view-coach-sessions-container"),o=a.querySelector("#view-coach-sessions-item");function l(p){let A=a.querySelectorAll(".session-details-w.card-item");A.forEach((i,_)=>{_!==A.length-1&&i.remove()});let u=a.querySelector("#no-sessions-found");p.length===0?u.style.display="flex":u.style.display="none",p.sort((i,_)=>_.time-i.time).forEach(i=>{let _=o.cloneNode(!0);_.setAttribute("id",""),_.querySelector("#session-name").innerText=i.session_name,_.querySelector("#time").innerText=E(i.time,!0,!0,!0),_.querySelector("#duration").innerText=T(i.duration),_.querySelector("#session-slot-bar").style.width=i.users.length/i.capacity*100+"%",_.querySelector("#session-capacity").innerText=`${i.users.length}/${i.capacity}`;let k=_.querySelector("#start-session-btn"),g=_.querySelector("#start-session-btn").querySelector("span");function w(){let d=new Date().getDate()-new Date(i.time).getDate(),x=new Date().getHours()-new Date(i.time).getHours(),N=new Date().getMinutes()-new Date(i.time).getMinutes(),h=Math.abs(N);N<-15&&d===0?(k.innerText="MISSED SESSION!",g.innerText=""):x===0&&h<=15?N>0?g.innerText=`OVERDUE BY ${h} MINUTE(S)`:N===0?g.innerText="NOW":g.innerText=`STARTS IN ${h} MINUTE(S)`:g.innerText="",setTimeout(()=>{w()},2e4)}w(),U({baseElement:_,TriggerBtn:"start-session-btn",_modalWindow:"confirm-session-popout"},()=>{let d=document.getElementById("confirm-session-popout");d.querySelector("#session-name").innerText=i.session_name,d.querySelector("#time").innerText=E(i.time,!0,!0,!0),d.querySelector("#duration").innerText=T(i.duration),d.querySelector("#gym_location").innerText=i.location,d.querySelector("#session-capacity").innerText=`${i.users.length}/${i.capacity}`,d.querySelector("#current-time").innerText=E(new Date().getTime(),!0);let x=d.querySelector("#confirm-start-session-popout-btn");x.onclick=()=>f(this,null,function*(){x.disabled=!0;let N=x.innerText;x.innerText="Starting Session";let h={},I=yield R(G+i.id,"POST",h,r);if(I.isFetchOk!==void 0&&!I.isFetchOk){let j=d.querySelector("#warning_block");j.innerText=I.message,j.style.display="flex",x.disabled=!1,x.innerText=N;return}S(`${M}?session=${i.id}`)})}),_.style.display="flex",a.prepend(_)})}l(s),L({TriggerBtn:"close-cancel-session-modal-btn",_modalWindow:"confirm-session-popout"},()=>{let A=document.getElementById("confirm-session-popout").querySelector("#warning_block");A.style.display="none"}),o.style.display="none"})}})();var q=P||[];q.push(function(){$(document).off("submit"),$("form").on("submit",function(e){return f(this,null,function*(){e.preventDefault()})})});
