var T=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var L=(t,o)=>{var e={};for(var a in t)q.call(t,a)&&o.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&T)for(var a of T(t))o.indexOf(a)<0&&j.call(t,a)&&(e[a]=t[a]);return e};var A=(t,o,e)=>new Promise((a,i)=>{var r=n=>{try{s(e.next(n))}catch(_){i(_)}},l=n=>{try{s(e.throw(n))}catch(_){i(_)}},s=n=>n.done?a(n.value):Promise.resolve(n.value).then(r,l);s((e=e.apply(t,o)).next())});var p={ADMIN:"ADMIN",SUPER_ADMIN:"SUPER_ADMIN",COACH:"COACH"};function E(t,o="GET",e=!1,a=!1,i=!1,r=!0){try{let l={"Content-Type":"application/json"};i&&(l={}),a&&(l.Authorization=`Bearer ${a}`);let s={method:o,headers:l};return e&&(r?s.body=JSON.stringify(e):s.body=e),fetch(t,s).then(n=>n.ok?n.json():n.json().then(_=>(Promise.reject(_.message),{isFetchOk:!1,status:n.status,message:_.message,payload:_&&_.payload?_.payload:null}))).then(n=>n).catch(n=>(console.error("Error in fetch",n),n))}catch(l){return console.error("Error!: "+l),l}}function S(t="nammax_auth"){let e=`; ${document.cookie}`.split(`; ${t}=`);return e.length===2?e.pop().split(";").shift():null}function f(t="/",o=2e3){setTimeout(()=>{window.location.href=t},o)}function w(t=1e3){setTimeout(()=>{window.location.reload()},t)}function C(t=null,o=!1,e=!1,a=!1){if(t==null)return"NaN";let i=new Date,r=new Date(t),l=r.getHours(),s="";if(a||(s=l>=12?"PM":"AM",l=l%12||12),o){let n=r.getMinutes();return n=n<10?`0${n}`:n,e?`${i.getDate()===r.getDate()?"Today":i.getDate()+1===r.getDate()?"Tomorrow":i.getDate()+2===r.getDate()?"Day After Tomorrow":h(t)} ${l}:${n} ${s}`:`${l}:${n} ${s}`}else return e?`${i.getDate()===r.getDate()?"Today":i.getDate()+1===r.getDate()?"Tomorrow":i.getDate()+2===r.getDate()?"Day After Tomorrow":h(t)} ${l} ${s}`:`${h(t)} ${l} ${s}`}function h(t=null){if(t==null)return"NaN";let o=new Date(t);return`${o.getDate()}/${o.getMonth()+1}/${o.getFullYear()}`}function M(t,o=null){if(t!=null){var e,a=t.options.length-1;for(e=a;e>=0;e--)e!==o&&t.remove(e)}}function B(t="/admin/sign-in",o="sidebar-logout-btn"){let e=document.getElementById(o);e?e.onclick=()=>z(t):console.error("Logout button not found")}function z(t="/sign-in"){window.localStorage.removeItem("auth"),f(`${t}`)}function b(t=p.ADMIN){if(t===p.ADMIN){let o=document.getElementById("admin-nav"),e=document.getElementById("super-admin-nav");o&&(o.style.display="flex"),e&&e.remove()}else if(t===p.SUPER_ADMIN){let o=document.getElementById("admin-nav"),e=document.getElementById("super-admin-nav");e&&(e.style.display="flex"),o&&o.remove()}}function k(){let t=document.getElementById("loading-screen");t?t.remove():console.log("did not find loading screen")}function v({mode:t="API",clientObjRefName:o="name",data:e,token:a,API:i,extraXanoInputObj:r=[],searchContainerElId:l=""},s,n=null,_=null){let c,m,u;if(l.length>0){let d=document.getElementById(l);c=d.querySelector("#search-input"),c.setAttribute("placeholder","Search"),m=d.querySelector("#search-btn"),u=d.querySelector("#search-reset-btn")}else c=document.getElementById("search-input"),c.setAttribute("placeholder","Search"),m=document.getElementById("search-btn"),u=document.getElementById("search-reset-btn");u.onclick=()=>{c.value="",X(u,{mode:t,clientObjRefName:o,data:e,searchquery:"",token:a,API:i,extraXanoInputObj:r},s,n,_)},m.onclick=()=>{let d=c.value;X(u,{mode:t,clientObjRefName:o,data:e,searchquery:d,token:a,API:i,extraXanoInputObj:r},s,n,_)}}function X(m,u,d,Nt,xt){return A(this,arguments,function*(t,{mode:o,clientObjRefName:e,data:a,searchquery:i,token:r,API:l,extraXanoInputObj:s=[]},n,_,c){if(i.length===0)t.style.display="none",_?n(a,_):n(a);else try{if(o==="API"){let N={search_query:`${i}:*`};s.length>0&&s.map(G=>{for(let[W,Y]of Object.entries(G))N[W]=Y});let x=yield E(l+"query","POST",N,r);if(x.isFetchOk!==void 0&&!x.isFetchOk)throw console.error(x.message),Error("API call failed");t.style.display="flex",_?n(x,_):n(x)}else{let N=a.filter(x=>x[e].toLowerCase().includes(i.toLowerCase()));t.style.display="flex",_?n(N,_):n(N)}}catch(N){c?c():console.error(N)}})}var K=Webflow||[];var O="/admin/sign-in";var I="https://x8ki-letl-twmt.n7.xano.io/api:Kml2N_BA/admin/team_detail/",P="https://x8ki-letl-twmt.n7.xano.io/api:Kml2N_BA/admin/team_details/update_details",H="https://x8ki-letl-twmt.n7.xano.io/api:Kml2N_BA/admin/team_detail/search/";var R,F,y=null,D=0,g=[];window.onload=function(){return A(this,null,function*(){B(O,"sidebar-logout-btn");var t=new URL(document.location.href);if(R=t.searchParams.get("teamId")||null,!R){console.error("No team id found");return}let o=S();if(o){let a=yield E(I+R+"/1","GET",!1,o);if(a.isFetchOk!==void 0&&!a.isFetchOk){console.error(a.message);return}let e=a,{team_role:i}=e,r=L(e,["team_role"]);i&&(i===p.SUPER_ADMIN||i===p.ADMIN)?(b(i),J(r,o,i)):f(`${O}?reason=UNAUTHORIZED_USER`)}else f(`${O}?reason=NOT_SIGNED_IN`)})};function J(t,o,e){return A(this,null,function*(){let{sessions:a,team:i}=t;if(i.gyms.length>0&&i.gyms[0].gym_id)F=i.gyms[0].gym_id;else{console.error("No gym id found");return}let r=new Date,l=a.items.filter(s=>new Date(s.time).getMonth()===r.getMonth()&&new Date(s.time).getFullYear()===r.getFullYear());Q(i,l,e,o),U(a,i.name),v({data:a,token:o,API:H,extraXanoInputObj:[{team_id:i.id}]},U,i.name),k()})}function Q(t,o,e,a){var l;t.profile_picture&&$("#team-detail-pfp").css("background-image",`url(${t.profile_picture.url})`),$("#team-detail-name").text(t.name),$("#team-detail-email").text(t.email),$("#team-detail-number").text(t.phone_number),$("#total-monthly-sessions").text(o.length),e===p.ADMIN?($("#monthly-salary-container").remove(),$("#team-password-container").remove(),$("#team-detail-update-btn").remove()):e===p.SUPER_ADMIN&&($("#monthly-salary").val((t==null?void 0:t.salary)||"0"),$("#team-password-container").removeClass("hide"),$("#team-detail-update-btn").removeClass("hide"),$("#team-detail-update-btn").click(()=>A(this,null,function*(){if($("#monthly-salary").val()&&$("#monthly-salary").val().trim()!==""){let s={team_id:R,salary:$("#monthly-salary").val()||0,password:$("#team-password").val()||null},n=yield E(P,"POST",s,a);if(n.isFetchOk!==void 0&&!n.isFetchOk){console.error(n.message);return}w()}})));let i=document.getElementById("team-detail-gym");if(M(i),t.gyms.length===0){var r=document.createElement("option");r.value="No gyms",r.innerText="No gyms",i.appendChild(r)}else(l=t==null?void 0:t.gyms)==null||l.forEach(s=>{var n=document.createElement("option");n.value=s.id,n.innerText=s.location,i.appendChild(n)})}function U(t,o,e=!1){let a=document.getElementById("table-container"),i=a.querySelector("#table-item");function r(l){y=l.nextPage;let s=a.querySelectorAll(".adb-user.w-inline-block");s.forEach((n,_)=>{_!==s.length-1&&n.remove()}),g.items.forEach((n,_)=>{var u,d;let c=i.cloneNode(!0);c.setAttribute("id",""),c.setAttribute("href",`/admin/session?sessionId=${n.id}`);let m=c.querySelectorAll(".colcontent");_%2===0&&(c.style.backgroundColor="#00edf4"),m[1].innerText=n.session_name,m[2].innerText=o,m[3].innerText=n.code,m[4].innerText=h(n.time),m[5].innerText=C(n.time,!0),m[6].innerText=(d=(u=n==null?void 0:n.users)==null?void 0:u.length)!=null?d:0,m[7].innerText=n.status,c.style.display="flex",a.prepend(c)})}e?(g.items.push(...t.items),g.nextPage=t.nextPage):g=t,r(g),i.style.display="none"}var V=new IntersectionObserver(t=>{t[0].intersectionRatio<=0||(D>0&&y?Z(y):D<1&&D++)});V.observe(document.querySelector(".loadmore"));function Z(t){return A(this,null,function*(){let o=S();if(o){let e=yield E(I+R+`/${t}`,"GET",!1,o);if(e.isFetchOk!==void 0&&!e.isFetchOk){console.error(e.message),e.payload&&e.payload.role===p.ADMIN&&e.payload.gyms&&e.payload.gyms.length>0?f(`/admin/gym/g?gymCode=${e.payload.gyms[0].gym_id}`):console.log("error fetching paginated");return}let{sessions:a,team:i}=e;U(a,i.name,!0)}})}var tt=K||[];tt.push(function(){$(document).off("submit"),$("form").on("submit",function(t){return A(this,null,function*(){t.preventDefault(),$(this).attr("id")==="team-detail-form-block"&&console.log(F)})})});
