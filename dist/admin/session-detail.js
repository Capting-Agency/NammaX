var O=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var I=(t,e)=>{var n={};for(var s in t)H.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&O)for(var s of O(t))e.indexOf(s)<0&&v.call(t,s)&&(n[s]=t[s]);return n};var N=(t,e,n)=>new Promise((s,r)=>{var _=o=>{try{l(n.next(o))}catch(a){r(a)}},i=o=>{try{l(n.throw(o))}catch(a){r(a)}},l=o=>o.done?s(o.value):Promise.resolve(o.value).then(_,i);l((n=n.apply(t,e)).next())});var D=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var u={ADMIN:"ADMIN",SUPER_ADMIN:"SUPER_ADMIN",COACH:"COACH"};function E(t,e="GET",n=!1,s=!1,r=!1,_=!0){try{let i={"Content-Type":"application/json"};r&&(i={}),s&&(i.Authorization=`Bearer ${s}`);let l={method:e,headers:i};return n&&(_?l.body=JSON.stringify(n):l.body=n),fetch(t,l).then(o=>o.ok?o.json():o.json().then(a=>(Promise.reject(a.message),{isFetchOk:!1,status:o.status,message:a.message,payload:a&&a.payload?a.payload:null}))).then(o=>o).catch(o=>(console.error("Error in fetch",o),o))}catch(i){return console.error("Error!: "+i),i}}function U(t="nammax_auth"){let n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2?n.pop().split(";").shift():null}function h(t="/",e=2e3){setTimeout(()=>{window.location.href=t},e)}function f(t=null,e=!1,n=!1,s=!1){if(t==null)return"NaN";let r=new Date,_=new Date(t),i=_.getHours(),l="";if(s||(l=i>=12?"PM":"AM",i=i%12||12),e){let o=_.getMinutes();return o=o<10?`0${o}`:o,n?`${r.getDate()===_.getDate()?"Today":r.getDate()+1===_.getDate()?"Tomorrow":r.getDate()+2===_.getDate()?"Day After Tomorrow":x(t)} ${i}:${o} ${l}`:`${i}:${o} ${l}`}else return n?`${r.getDate()===_.getDate()?"Today":r.getDate()+1===_.getDate()?"Tomorrow":r.getDate()+2===_.getDate()?"Day After Tomorrow":x(t)} ${i} ${l}`:`${x(t)} ${i} ${l}`}function x(t=null){if(t==null)return"NaN";let e=new Date(t);return`${e.getDate()}/${e.getMonth()+1}/${e.getFullYear()}`}function T(t=null){if(t==null)return"NaN";t=t*60;let e=`${t/60^0}`.slice(-2),n=("0"+t%60).slice(-2);return e!="0"?n!="00"?`${e} HR ${n} M`:e+" HR":n+" Mins"}function L(t="/admin/sign-in",e="sidebar-logout-btn"){let n=document.getElementById(e);n?n.onclick=()=>P(t):console.error("Logout button not found")}function P(t="/sign-in"){window.localStorage.removeItem("auth"),h(`${t}`)}function y(t=u.ADMIN){if(t===u.ADMIN){let e=document.getElementById("admin-nav"),n=document.getElementById("super-admin-nav");e&&(e.style.display="flex"),n&&n.remove()}else if(t===u.SUPER_ADMIN){let e=document.getElementById("admin-nav"),n=document.getElementById("super-admin-nav");n&&(n.style.display="flex"),e&&e.remove()}}function w(){let t=document.getElementById("loading-screen");t?t.remove():console.log("did not find loading screen")}function M({mode:t="API",clientObjRefName:e="name",data:n,token:s,API:r,extraXanoInputObj:_=[],searchContainerElId:i=""},l,o=null,a=null){let c,R,A;if(i.length>0){let d=document.getElementById(i);c=d.querySelector("#search-input"),c.setAttribute("placeholder","Search"),R=d.querySelector("#search-btn"),A=d.querySelector("#search-reset-btn")}else c=document.getElementById("search-input"),c.setAttribute("placeholder","Search"),R=document.getElementById("search-btn"),A=document.getElementById("search-reset-btn");A.onclick=()=>{c.value="",C(A,{mode:t,clientObjRefName:e,data:n,searchquery:"",token:s,API:r,extraXanoInputObj:_},l,o,a)},R.onclick=()=>{let d=c.value;C(A,{mode:t,clientObjRefName:e,data:n,searchquery:d,token:s,API:r,extraXanoInputObj:_},l,o,a)}}function C(R,A,d,st,it){return N(this,arguments,function*(t,{mode:e,clientObjRefName:n,data:s,searchquery:r,token:_,API:i,extraXanoInputObj:l=[]},o,a,c){if(r.length===0)t.style.display="none",a?o(s,a):o(s);else try{if(e==="API"){let m={search_query:`${r}:*`};l.length>0&&l.map(b=>{for(let[X,K]of Object.entries(b))m[X]=K});let p=yield E(i+"query","POST",m,_);if(p.isFetchOk!==void 0&&!p.isFetchOk)throw console.error(p.message),Error("API call failed");t.style.display="flex",a?o(p,a):o(p)}else{let m=s.filter(p=>p[n].toLowerCase().includes(r.toLowerCase()));t.style.display="flex",a?o(m,a):o(m)}}catch(m){c?c():console.error(m)}})}var S="/admin/sign-in";var B="https://x8ki-letl-twmt.n7.xano.io/api:Kml2N_BA/admin/session_detail/";var g;window.onload=function(){return N(this,null,function*(){L("/admin/sign-in","sidebar-logout-btn");var t=new URL(document.location.href);if(g=t.searchParams.get("sessionId")||null,!g){console.error("No session id found");return}let e=U();if(e){let s=yield E(B+g,"GET",!1,e);if(s.isFetchOk!==void 0&&!s.isFetchOk){console.error(s.message);return}let n=s,{team_role:r}=n,_=I(n,["team_role"]);r&&(r===u.SUPER_ADMIN||r===u.ADMIN)?(y(r),G(_)):h(`${S}?reason=UNAUTHORIZED_USER`)}else h(`${S}?reason=NOT_SIGNED_IN`)})};function G(t){return N(this,null,function*(){let{sessions:e}=t;F(e),k(e.users),M({mode:"client",clientObjRefName:"name",data:e.users},k),w()})}function F(t){var n,s,r,_,i,l,o;$("#session-detail-name").text(t.session_name),$("#session-detail-coach").text(t.name),$("#session-detail-location").text(t.location),$("#session-detail-date").text(`${x(t.time)} (${D[new Date(t.time).getDay()]})`),$("#session-detail-duration").text(T(t.duration)),$("#session-detail-scheduled-time").text(f(t.time,!0)),$("#session-detail-start-time").text((n=f(t.start_time,!0))!=null?n:"NaN"),$("#session-detail-end-time").text((s=f(t.end_time,!0))!=null?s:"NaN");let e=(_=(r=t==null?void 0:t.users)==null?void 0:r.filter(a=>a.attended===!0).length)!=null?_:0;$("#session-detail-signed-up-users").text((l=(i=t==null?void 0:t.users)==null?void 0:i.length)!=null?l:"0"),$("#session-detail-missed-users").text(((o=t==null?void 0:t.users)==null?void 0:o.length)-e),$("#session-detail-attended-users").text(e),$("#session-comment").text(t.comments!==""?t.comments:"No comments")}function k(t){let e=document.getElementById("table-container"),n=e.querySelector("#table-item");function s(r){let _=e.querySelectorAll(".adb-user.w-inline-block");_.forEach((i,l)=>{l!==_.length-1&&i.remove()}),r==null||r.forEach((i,l)=>{let o=n.cloneNode(!0);o.setAttribute("id",""),o.setAttribute("href",`/admin/user?userId=${i.user_id}`);let a=o.querySelectorAll(".colcontent");l%2===0&&(o.style.backgroundColor="#00edf4"),i.profile_picture&&(a[0].style.backgroundImage=`url(${i.profile_picture.url})`),a[1].innerText=i.name,a[2].innerText=i.status,a[3].innerText="NaN",a[4].innerText="NaN",a[5].innerText="NaN",a[6].innerText=i.gender,o.style.display="flex",e.prepend(o)})}s(t),n.style.display="none"}
