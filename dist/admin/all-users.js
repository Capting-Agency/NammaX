var N=(n,t,o)=>new Promise((r,l)=>{var _=e=>{try{s(o.next(e))}catch(i){l(i)}},a=e=>{try{s(o.throw(e))}catch(i){l(i)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(_,a);s((o=o.apply(n,t)).next())});var A={ADMIN:"ADMIN",SUPER_ADMIN:"SUPER_ADMIN",COACH:"COACH"};function E(n,t="GET",o=!1,r=!1,l=!1,_=!0){try{let a={"Content-Type":"application/json"};l&&(a={}),r&&(a.Authorization=`Bearer ${r}`);let s={method:t,headers:a};return o&&(_?s.body=JSON.stringify(o):s.body=o),fetch(n,s).then(e=>e.ok?e.json():e.json().then(i=>(Promise.reject(i.message),{isFetchOk:!1,status:e.status,message:i.message,payload:i&&i.payload?i.payload:null}))).then(e=>e).catch(e=>(console.error("Error in fetch",e),e))}catch(a){return console.error("Error!: "+a),a}}function S(n="nammax_auth"){let o=`; ${document.cookie}`.split(`; ${n}=`);return o.length===2?o.pop().split(";").shift():null}function x(n="/",t=0){setTimeout(()=>{window.location.href=n},t)}function f(n=null){if(n==null)return"NaN";let t=n.split("-"),o=Date.now()-new Date(parseInt(t[2]),parseInt(t[1])-1,parseInt(t[0])).getTime(),r=new Date(o);return Math.abs(r.getUTCFullYear()-1970)}function I(n="/admin/sign-in",t="sidebar-logout-btn"){let o=document.getElementById(t);o?o.onclick=()=>M(n):console.error("Logout button not found")}function M(n="/sign-in"){window.localStorage.removeItem("auth"),x(`${n}`)}function O(n=A.ADMIN){if(n===A.ADMIN){let t=document.getElementById("admin-nav"),o=document.getElementById("super-admin-nav");t&&(t.style.display="flex"),o&&o.remove()}else if(n===A.SUPER_ADMIN){let t=document.getElementById("admin-nav"),o=document.getElementById("super-admin-nav");o&&(o.style.display="flex"),t&&t.remove()}}function U({mode:n="API",clientObjRefName:t="name",data:o,token:r,API:l,extraXanoInputObj:_=[],searchContainerElId:a=""},s,e=null,i=null){let c,R,u;if(a.length>0){let d=document.getElementById(a);c=d.querySelector("#search-input"),c.setAttribute("placeholder","Search"),R=d.querySelector("#search-btn"),u=d.querySelector("#search-reset-btn")}else c=document.getElementById("search-input"),c.setAttribute("placeholder","Search"),R=document.getElementById("search-btn"),u=document.getElementById("search-reset-btn");u.onclick=()=>{c.value="",g(u,{mode:n,clientObjRefName:t,data:o,searchquery:"",token:r,API:l,extraXanoInputObj:_},s,e,i)},R.onclick=()=>{let d=c.value;g(u,{mode:n,clientObjRefName:t,data:o,searchquery:d,token:r,API:l,extraXanoInputObj:_},s,e,i)}}function g(R,u,d,j,z){return N(this,arguments,function*(n,{mode:t,clientObjRefName:o,data:r,searchquery:l,token:_,API:a,extraXanoInputObj:s=[]},e,i,c){if(l.length===0)n.style.display="none",i?e(r,i):e(r);else try{if(t==="API"){let p={search_query:`${l}:*`};s.length>0&&s.map(C=>{for(let[T,w]of Object.entries(C))p[T]=w});let m=yield E(a+"query","POST",p,_);if(m.isFetchOk!==void 0&&!m.isFetchOk)throw console.error(m.message),Error("API call failed");n.style.display="flex",i?e(m,i):e(m)}else{let p=r.filter(m=>m[o].toLowerCase().includes(l.toLowerCase()));n.style.display="flex",i?e(p,i):e(p)}}catch(p){c?c():console.error(p)}})}var h="/admin/sign-in";var y="https://x8ki-letl-twmt.n7.xano.io/api:Kml2N_BA/super_admin/all_users";var D="https://x8ki-letl-twmt.n7.xano.io/api:Kml2N_BA/super_admin/dashboard/search/";window.onload=function(){return N(this,null,function*(){I(h,"sidebar-logout-btn");let n=S();if(n){let t=yield E(y,"GET",!1,n);if(t.isFetchOk!==void 0&&!t.isFetchOk){console.error(t.message),t.payload&&t.payload.role===A.ADMIN&&t.payload.gyms&&t.payload.gyms.length>0?x(`/admin/gym/g?gymCode=${t.payload.gyms[0].gym_id}`):x(`${h}?reason=UNAUTHORIZED_USER`);return}O(A.SUPER_ADMIN),B(t,n)}else x(`${h}?reason=NOT_SIGNED_IN`)})};function B(n,t){return N(this,null,function*(){L(n),U({data:n,token:t,API:D},L)})}function L(n){let t=document.getElementById("table-container"),o=t.querySelector("#table-item");function r(l){let _=t.querySelectorAll(".adb-user.w-inline-block");_.forEach((a,s)=>{s!==_.length-1&&a.remove()}),l.forEach((a,s)=>{let e=o.cloneNode(!0);e.setAttribute("id",""),e.setAttribute("href",`/admin/user?userId=${a.id}`);let i=e.querySelectorAll(".colcontent");s%2===0&&(e.style.backgroundColor="#00edf4"),a.profile_picture&&(i[0].style.backgroundImage=`url(${a.profile_picture.url})`),i[1].innerText=a.name,i[2].innerText=a.code,i[3].innerText="NaN",i[4].innerText=a.gender.charAt(0),i[5].innerText=f(a.date_of_birth),i[6].innerText="NaN",e.style.display="flex",t.prepend(e)})}r(n),o.style.display="none"}
//# sourceMappingURL=all-users.js.map
