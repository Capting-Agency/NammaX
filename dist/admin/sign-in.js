var m=(r,o,n)=>new Promise((t,l)=>{var d=e=>{try{s(n.next(e))}catch(a){l(a)}},i=e=>{try{s(n.throw(e))}catch(a){l(a)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(d,i);s((n=n.apply(r,o)).next())});var c={ADMIN:"ADMIN",SUPER_ADMIN:"SUPER_ADMIN",COACH:"COACH"};function f(r,o="GET",n=!1,t=!1,l=!1,d=!0){try{let i={"Content-Type":"application/json"};l&&(i={}),t&&(i.Authorization=`Bearer ${t}`);let s={method:o,headers:i};return n&&(d?s.body=JSON.stringify(n):s.body=n),fetch(r,s).then(e=>e.ok?e.json():e.json().then(a=>(Promise.reject(a.message),{isFetchOk:!1,status:e.status,message:a.message,payload:a&&a.payload?a.payload:null}))).then(e=>e).catch(e=>(console.error("Error in fetch",e),e))}catch(i){return console.error("Error!: "+i),i}}function g(r=null,o="nammax_auth",n=60*60*24){r&&(document.cookie=`${o}=${r}; path=/; max-age=${n}`)}function u(r="/",o=0){setTimeout(()=>{window.location.href=r},o)}var h="/admin/dashboard",y="/admin/gym/g",x="/admin/all-gyms",b="https://x8ki-letl-twmt.n7.xano.io/api:GEC76oIp/admin_auth/login",p=p||[];p.push(function(){$(document).off("submit"),$("form").submit(function(r){return m(this,null,function*(){r.preventDefault();let o=$(this),n={email:document.getElementById("admin_email-2").value,password:document.getElementById("admin_password").value},t=yield f(b,"POST",n);if(t.isFetchOk!==void 0&&!t.isFetchOk){o.siblings(".w-form-done").hide().siblings(".w-form-fail").show(),console.error(t.message);return}Object.keys(t).includes("authToken")===!1?o.siblings(".w-form-done").hide().siblings(".w-form-fail").show():(g(t.authToken),t.role===c.SUPER_ADMIN?u(h):t.role===c.ADMIN?t.gyms&&t.gyms.length>0?u(`${y}?gymCode=${t.gyms[0].gym_id}`):u(x):console.error("Unknown role"),o.hide().siblings(".w-form-done").show().siblings(".w-form-fail").hide())})})});
