var m=(r,n,o)=>new Promise((l,t)=>{var u=e=>{try{s(o.next(e))}catch(a){t(a)}},i=e=>{try{s(o.throw(e))}catch(a){t(a)}},s=e=>e.done?l(e.value):Promise.resolve(e.value).then(u,i);s((o=o.apply(r,n)).next())});var c={ADMIN:"ADMIN",SUPER_ADMIN:"SUPER_ADMIN",COACH:"COACH"};function f(r,n="GET",o=!1,l=!1,t=!1,u=!0){try{let i={"Content-Type":"application/json"};t&&(i={}),l&&(i.Authorization=`Bearer ${l}`);let s={method:n,headers:i};return o&&(u?s.body=JSON.stringify(o):s.body=o),fetch(r,s).then(e=>e.ok?e.json():e.json().then(a=>(Promise.reject(a.message),{isFetchOk:!1,status:e.status,message:a.message,payload:a&&a.payload?a.payload:null}))).then(e=>e).catch(e=>(console.error("Error in fetch",e),e))}catch(i){return console.error("Error!: "+i),i}}function g(r=null,n="nammax_auth",o=60*60*24){r&&(document.cookie=`${n}=${r}; path=/; max-age=${o}`)}function d(r="/",n=2e3){setTimeout(()=>{window.location.href=r},n)}var p=Webflow||[];var h="/admin/dashboard",y="/admin/gym/g",b="/admin/all-gyms",x="https://x8ki-letl-twmt.n7.xano.io/api:GEC76oIp/admin_auth/login",D=p||[];D.push(function(){$(document).off("submit"),$("form").submit(function(r){return m(this,null,function*(){r.preventDefault();let n=document.getElementById("submit");n&&(n.disabled=!0);let o=$(this),l={email:document.getElementById("admin_email-2").value,password:document.getElementById("admin_password").value},t=yield f(x,"POST",l);if(t.isFetchOk!==void 0&&!t.isFetchOk){o.siblings(".w-form-done").hide().siblings(".w-form-fail").show(),console.error(t.message),n&&(n.disabled=!1);return}Object.keys(t).includes("authToken")===!1?(o.siblings(".w-form-done").hide().siblings(".w-form-fail").show(),n&&(n.disabled=!1)):(g(t.authToken),t.role===c.SUPER_ADMIN?d(h):t.role===c.ADMIN?t.gyms&&t.gyms.length>0?d(`${y}?gymCode=${t.gyms[0].gym_id}`):d(b):console.error("Unknown role"),o.hide().siblings(".w-form-done").show().siblings(".w-form-fail").hide())})})});
