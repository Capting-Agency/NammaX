var h=(n,e,t)=>new Promise((l,r)=>{var _=o=>{try{s(t.next(o))}catch(i){r(i)}},a=o=>{try{s(t.throw(o))}catch(i){r(i)}},s=o=>o.done?l(o.value):Promise.resolve(o.value).then(_,a);s((t=t.apply(n,e)).next())});var u={ADMIN:"ADMIN",SUPER_ADMIN:"SUPER_ADMIN",COACH:"COACH"};function E(n,e="GET",t=!1,l=!1,r=!1,_=!0){try{let a={"Content-Type":"application/json"};r&&(a={}),l&&(a.Authorization=`Bearer ${l}`);let s={method:e,headers:a};return t&&(_?s.body=JSON.stringify(t):s.body=t),fetch(n,s).then(o=>o.ok?o.json():o.json().then(i=>(Promise.reject(i.message),{isFetchOk:!1,status:o.status,message:i.message,payload:i&&i.payload?i.payload:null}))).then(o=>o).catch(o=>(console.error("Error in fetch",o),o))}catch(a){return console.error("Error!: "+a),a}}function T(n="nammax_auth"){let t=`; ${document.cookie}`.split(`; ${n}=`);return t.length===2?t.pop().split(";").shift():null}function f(n="/",e=2e3){setTimeout(()=>{window.location.href=n},e)}function w(n=1e3){setTimeout(()=>{window.location.reload()},n)}function L(n,e=null){if(n!=null){var t,l=n.options.length-1;for(t=l;t>=0;t--)t!==e&&n.remove(t)}}function k(n="/admin/sign-in",e="sidebar-logout-btn"){let t=document.getElementById(e);t?t.onclick=()=>q(n):console.error("Logout button not found")}function q(n="/sign-in"){window.localStorage.removeItem("auth"),f(`${n}`)}function M(n=u.ADMIN){if(n===u.ADMIN){let e=document.getElementById("admin-nav"),t=document.getElementById("super-admin-nav");e&&(e.style.display="flex"),t&&t.remove()}else if(n===u.SUPER_ADMIN){let e=document.getElementById("admin-nav"),t=document.getElementById("super-admin-nav");t&&(t.style.display="flex"),e&&e.remove()}}function B(){let n=document.getElementById("loading-screen");n?n.remove():console.log("did not find loading screen")}function X({mode:n="API",clientObjRefName:e="name",data:t,token:l,API:r,extraXanoInputObj:_=[],searchContainerElId:a=""},s,o=null,i=null){let c,p,A;if(a.length>0){let d=document.getElementById(a);c=d.querySelector("#search-input"),c.setAttribute("placeholder","Search"),p=d.querySelector("#search-btn"),A=d.querySelector("#search-reset-btn")}else c=document.getElementById("search-input"),c.setAttribute("placeholder","Search"),p=document.getElementById("search-btn"),A=document.getElementById("search-reset-btn");A.onclick=()=>{c.value="",v(A,{mode:n,clientObjRefName:e,data:t,searchquery:"",token:l,API:r,extraXanoInputObj:_},s,o,i)},p.onclick=()=>{let d=c.value;v(A,{mode:n,clientObjRefName:e,data:t,searchquery:d,token:l,API:r,extraXanoInputObj:_},s,o,i)}}function v(p,A,d,C,pe){return h(this,arguments,function*(n,{mode:e,clientObjRefName:t,data:l,searchquery:r,token:_,API:a,extraXanoInputObj:s=[]},o,i,c){if(r.length===0)n.style.display="none",i?o(l,i):o(l);else try{if(e==="API"){let N={search_query:`${r}:*`};s.length>0&&s.map(G=>{for(let[F,W]of Object.entries(G))N[F]=W});let x=yield E(a+"query","POST",N,_);if(x.isFetchOk!==void 0&&!x.isFetchOk)throw console.error(x.message),Error("API call failed");n.style.display="flex",i?o(x,i):o(x)}else{let N=l.filter(x=>x[t].toLowerCase().includes(r.toLowerCase()));n.style.display="flex",i?o(N,i):o(N)}}catch(N){c?c():console.error(N)}})}var K=Webflow||[];var O="/admin/sign-in";var H="https://x8ki-letl-twmt.n7.xano.io/api:Kml2N_BA/super_admin/all_teams",b="https://x8ki-letl-twmt.n7.xano.io/api:Kml2N_BA/super_admin/all_teams/add_team";var I,y,U,D,m,R,g,S=[];$(document).ready(function(){m=document.querySelector("#team-gym-select"),I=document.querySelector("#team-name-input"),y=document.querySelector("#team-email-input"),D=document.querySelector("#team-password-input"),U=document.querySelector("#team-phone-input"),R=document.querySelector("#team-role-select"),g=document.querySelector("#team-add-member-btn"),m.disabled=!0,I.disabled=!0,y.disabled=!0,D.disabled=!0,U.disabled=!0,R.disabled=!0,g.disabled=!0});window.onload=function(){return h(this,null,function*(){k(O,"sidebar-logout-btn");let n=T();if(n){let e=yield E(H,"GET",!1,n);if(e.isFetchOk!==void 0&&!e.isFetchOk){console.error(e.message),e.payload&&e.payload.role===u.ADMIN&&e.payload.gyms&&e.payload.gyms.length>0?f(`/admin/gym/g?gymCode=${e.payload.gyms[0].gym_id}`):f(`${O}?reason=UNAUTHORIZED_USER`);return}M(u.SUPER_ADMIN),Y(e,n)}else f(`${O}?reason=NOT_SIGNED_IN`)})};function Y(n,e){return h(this,null,function*(){m.disabled=!1,P(n),j(e),X({mode:"client",data:n,clientObjRefName:"name"},P),B()})}function P(n){let e=document.getElementById("table-container"),t=e.querySelector("#table-item");function l(r){let _=e.querySelectorAll(".adb-user.w-inline-block");_.forEach((a,s)=>{s!==_.length-1&&a.remove()}),r.forEach((a,s)=>{let o=t.cloneNode(!0);o.setAttribute("id",""),o.setAttribute("href",`/admin/team?teamId=${a.id}`);let i=o.querySelectorAll(".colcontent");s%2===0&&(o.style.backgroundColor="#00edf4"),a.profile_picture&&(i[0].style.backgroundImage=`url(${a.profile_picture.url})`),i[1].innerText=a.name,i[2].innerText=a.role,i[4].innerText=a.email,i[5].innerText=a.phone_number;let c="";a.gyms.forEach((p,A)=>{var d,C;c+=p.code,A<a.gyms.length-1&&(c+=", "),i[6].innerText=(C=(d=p==null?void 0:p.users)==null?void 0:d.length)!=null?C:0}),i[3].innerText=c,i[7].innerText=a.status,o.style.display="flex",e.prepend(o)})}l(n),t.style.display="none"}function j(n){$("form :input").attr("autocomplete","off");function e(){return h(this,null,function*(){let t=yield E(b,"GET",!1,n);if(t.isFetchOk!==void 0&&!t.isFetchOk){console.error(t.message);return}z(t),m.removeEventListener("focus",e)})}m.addEventListener("focus",e)}function z(n){L(m),n.forEach(e=>{let t=document.createElement("option");t.setAttribute("value",e.id),t.innerText=e.code+" - "+e.location,m.appendChild(t)}),$(m).attr("multiple","multiple"),$(m).multiselect({onInitialized:function(e){S=[e[0].selectedOptions[0].value]},onChange:function(){var e=$(".multiselect-option.dropdown-item.active"),t=[];$(e).each(function(){t.push($(this).find(".form-check-input").val())}),S=t}}),$(m).siblings(".btn-group").addClass("adb-session-dd").children(".multiselect.dropdown-toggle").css("height","100%"),L(R),Object.keys(u).forEach(e=>{let t=document.createElement("option");t.setAttribute("value",e.replace(" ","_")),t.innerText=e,R.appendChild(t)}),I.disabled=!1,y.disabled=!1,D.disabled=!1,U.disabled=!1,R.disabled=!1}var J=K||[];J.push(function(){$(document).off("submit"),$("form").on("change",function(){let n=I.value,e=y.value,t=D.value;S.length>0&&n!==""&&e!==""&&t!==""&&(g.disabled=!1,g.classList.remove("disabled"))}),$("form").on("submit",function(n){return h(this,null,function*(){n.preventDefault();let e=$(this),t=I.value,l=y.value,r=D.value,_=U.value,a=R.value,s=T();if(s)if(S.length>0&&t!==""&&l!==""&&r!==""){let o={gyms:[...S.map(c=>({gym_id:parseInt(c)}))],name:t,email:l,password:r,phone_number:_.trim()===""?null:_,role:a},i=yield E(b,"POST",o,s);if(i.isFetchOk!==void 0&&!i.isFetchOk){console.error(i.message),g.disabled=!1,g.classList.remove("disabled");return}w()}else S.length===0?e[0][0].style.borderColor="red":e[0][0].style.borderColor="black",t.trim()===""?e[0][1].style.borderColor="red":e[0][1].style.borderColor="black",l.trim()===""?e[0][2].style.borderColor="red":e[0][2].style.borderColor="black",r.trim()===""?e[0][3].style.borderColor="red":e[0][2].style.borderColor="black",e.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("Please fill out all (required) fields");else f(`${O}?reason=NOT_SIGNED_IN`)})})});
