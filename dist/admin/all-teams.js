var f=(o,e,t)=>new Promise((i,l)=>{var _=n=>{try{r(t.next(n))}catch(s){l(s)}},a=n=>{try{r(t.throw(n))}catch(s){l(s)}},r=n=>n.done?i(n.value):Promise.resolve(n.value).then(_,a);r((t=t.apply(o,e)).next())});var d={ADMIN:"ADMIN",SUPER_ADMIN:"SUPER_ADMIN",COACH:"COACH"};function E(o,e="GET",t=!1,i=!1,l=!1,_=!0){try{let a={"Content-Type":"application/json"};l&&(a={}),i&&(a.Authorization=`Bearer ${i}`);let r={method:e,headers:a};return t&&(_?r.body=JSON.stringify(t):r.body=t),fetch(o,r).then(n=>n.ok?n.json():n.json().then(s=>(Promise.reject(s.message),{isFetchOk:!1,status:n.status,message:s.message,payload:s&&s.payload?s.payload:null}))).then(n=>n).catch(n=>(console.error("Error in fetch",n),n))}catch(a){return console.error("Error!: "+a),a}}function T(o="nammax_auth"){let t=`; ${document.cookie}`.split(`; ${o}=`);return t.length===2?t.pop().split(";").shift():null}function h(o="/",e=2e3){setTimeout(()=>{window.location.href=o},e)}function M(o=1e3){setTimeout(()=>{window.location.reload()},o)}function L(o,e=null){if(o!=null){var t,i=o.options.length-1;for(t=i;t>=0;t--)t!==e&&o.remove(t)}}function B(o="/admin/sign-in",e="sidebar-logout-btn"){let t=document.getElementById(e);t?t.onclick=()=>F(o):console.error("Logout button not found")}function F(o="/sign-in"){window.localStorage.removeItem("auth"),h(`${o}`)}function v(o=d.ADMIN){if(o===d.ADMIN){let e=document.getElementById("admin-nav"),t=document.getElementById("super-admin-nav");e&&(e.style.display="flex"),t&&t.remove()}else if(o===d.SUPER_ADMIN){let e=document.getElementById("admin-nav"),t=document.getElementById("super-admin-nav");t&&(t.style.display="flex"),e&&e.remove()}}function j(){let o=document.getElementById("loading-screen");o?o.remove():console.log("did not find loading screen")}function z({mode:o="API",clientObjRefName:e="name",data:t,token:i,API:l,extraXanoInputObj:_=[],searchContainerElId:a=""},r,n=null,s=null){let c,N,m;if(a.length>0){let u=document.getElementById(a);c=u.querySelector("#search-input"),c.setAttribute("placeholder","Search"),N=u.querySelector("#search-btn"),m=u.querySelector("#search-reset-btn")}else c=document.getElementById("search-input"),c.setAttribute("placeholder","Search"),N=document.getElementById("search-btn"),m=document.getElementById("search-reset-btn");m.onclick=()=>{c.value="",X(m,{mode:o,clientObjRefName:e,data:t,searchquery:"",token:i,API:l,extraXanoInputObj:_},r,n,s)},N.onclick=()=>{let u=c.value;X(m,{mode:o,clientObjRefName:e,data:t,searchquery:u,token:i,API:l,extraXanoInputObj:_},r,n,s)}}function X(N,m,u,C,pe){return f(this,arguments,function*(o,{mode:e,clientObjRefName:t,data:i,searchquery:l,token:_,API:a,extraXanoInputObj:r=[]},n,s,c){if(l.length===0)o.style.display="none",s?n(i,s):n(i);else try{if(e==="API"){let x={search_query:`${l}:*`};r.length>0&&r.map(P=>{for(let[k,G]of Object.entries(P))x[k]=G});let A=yield E(a+"query","POST",x,_);if(A.isFetchOk!==void 0&&!A.isFetchOk)throw console.error(A.message),Error("API call failed");o.style.display="flex",s?n(A,s):n(A)}else{let x=i.filter(A=>A[t].toLowerCase().includes(l.toLowerCase()));o.style.display="flex",s?n(x,s):n(x)}}catch(x){c?c():console.error(x)}})}var w=Webflow||[];var O="/admin/sign-in";var K="https://xoxo-jnzf-s0on.m2.xano.io/api:Kml2N_BA/super_admin/all_teams",b="https://xoxo-jnzf-s0on.m2.xano.io/api:Kml2N_BA/super_admin/all_teams/add_team";var I,y,U,D,p,S,g,R=[];$(document).ready(function(){p=document.querySelector("#team-gym-select"),I=document.querySelector("#team-name-input"),y=document.querySelector("#team-email-input"),D=document.querySelector("#team-password-input"),U=document.querySelector("#team-phone-input"),S=document.querySelector("#team-role-select"),g=document.querySelector("#team-add-member-btn"),p.disabled=!0,I.disabled=!0,y.disabled=!0,D.disabled=!0,U.disabled=!0,S.disabled=!0,g.disabled=!0});window.onload=function(){return f(this,null,function*(){B(O,"sidebar-logout-btn");let o=T();if(o){let e=yield E(K,"GET",!1,o);if(e.isFetchOk!==void 0&&!e.isFetchOk){console.error(e.message),e.payload&&e.payload.role===d.ADMIN&&e.payload.gyms&&e.payload.gyms.length>0?h(`/admin/gym/g?gymCode=${e.payload.gyms[0].gym_id}`):h(`${O}?reason=UNAUTHORIZED_USER`);return}v(d.SUPER_ADMIN),W(e,o)}else h(`${O}?reason=NOT_SIGNED_IN`)})};function W(o,e){return f(this,null,function*(){p.disabled=!1,H(o),q(e),z({mode:"client",data:o,clientObjRefName:"name"},H),j()})}function H(o){let e=document.getElementById("table-container"),t=e.querySelector("#table-item");function i(l){let _=e.querySelectorAll(".adb-user.w-inline-block");_.forEach((a,r)=>{r!==_.length-1&&a.remove()}),l.forEach((a,r)=>{let n=t.cloneNode(!0);n.setAttribute("id",""),n.setAttribute("href",`/admin/team?teamId=${a.id}`);let s=n.querySelectorAll(".colcontent");r%2===0&&(n.style.backgroundColor="#00edf4"),a.profile_picture&&(s[0].style.backgroundImage=`url(${a.profile_picture.url})`),s[1].innerText=a.name,s[2].innerText=a.role,s[4].innerText=a.email,s[5].innerText=a.phone_number||"NaN";let c="",N=0;a.gyms.forEach((m,u)=>{var C;c+=m.code,u<a.gyms.length-1&&(c+=", "),N+=((C=m==null?void 0:m.users)==null?void 0:C.length)||0}),s[3].innerText=c||"NaN",s[6].innerText=N,s[7].innerText=a.status,n.style.display="flex",e.prepend(n)})}i(o),t.style.display="none"}function q(o){$("form :input").attr("autocomplete","off");function e(){return f(this,null,function*(){let t=yield E(b,"GET",!1,o);if(t.isFetchOk!==void 0&&!t.isFetchOk){console.error(t.message);return}Y(t),p.removeEventListener("focus",e)})}p.addEventListener("focus",e)}function Y(o){L(p),o.forEach(e=>{let t=document.createElement("option");t.setAttribute("value",e.id),t.innerText=e.code+" - "+e.location,p.appendChild(t)}),$(p).attr("multiple","multiple"),$(p).multiselect({onInitialized:function(e){R=[e[0].selectedOptions[0].value]},onChange:function(){var e=$(".multiselect-option.dropdown-item.active"),t=[];$(e).each(function(){t.push($(this).find(".form-check-input").val())}),R=t}}),$(p).siblings(".btn-group").addClass("adb-session-dd").children(".multiselect.dropdown-toggle").css("height","100%"),L(S),Object.keys(d).forEach(e=>{let t=document.createElement("option");t.setAttribute("value",e.replace(" ","_")),t.innerText=e,S.appendChild(t)}),I.disabled=!1,y.disabled=!1,D.disabled=!1,U.disabled=!1,S.disabled=!1}var J=w||[];J.push(function(){$(document).off("submit"),$("form").on("change",function(){let o=I.value,e=y.value,t=D.value;R.length>0&&o!==""&&e!==""&&t!==""&&(g.disabled=!1,g.classList.remove("disabled"))}),$("form").on("submit",function(o){return f(this,null,function*(){o.preventDefault();let e=$(this),t=I.value,i=y.value,l=D.value,_=U.value,a=S.value,r=T();if(r)if(R.length>0&&t!==""&&i!==""&&l!==""){let n={gyms:[...R.map(c=>({gym_id:parseInt(c)}))],name:t,email:i,password:l,phone_number:_.trim()===""?null:_,role:a},s=yield E(b,"POST",n,r);if(s.isFetchOk!==void 0&&!s.isFetchOk){console.error(s.message),g.disabled=!1,g.classList.remove("disabled");return}M()}else R.length===0?e[0][0].style.borderColor="red":e[0][0].style.borderColor="black",t.trim()===""?e[0][1].style.borderColor="red":e[0][1].style.borderColor="black",i.trim()===""?e[0][2].style.borderColor="red":e[0][2].style.borderColor="black",l.trim()===""?e[0][3].style.borderColor="red":e[0][2].style.borderColor="black",e.siblings(".w-form-done").hide().siblings(".w-form-fail").show().text("Please fill out all (required) fields");else h(`${O}?reason=NOT_SIGNED_IN`)})})});
